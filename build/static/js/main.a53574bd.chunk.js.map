{"version":3,"sources":["components/Button.js","components/Person.js","components/PersonList.js","components/PersonForm.js","components/Filter.js","components/Notification.js","services/person.js","components/ErrorMessage.js","App.js","index.js"],"names":["Button","name","text","onClick","Person","p","onButtonClick","number","PersonList","persons","filter","handleClick","listToShow","String","trim","length","f","toUpperCase","includes","map","PersonForm","hfs","hnamei","hnumberi","nname","nnumber","onSubmit","value","onChange","type","Filter","nf","flist","Notification","message","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","baseUrl","personService","getAll","axios","get","then","response","data","create","newPerson","post","update","id","put","deletePerson","delete","ErrorMessage","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setFilter","notification","setNotification","errorMessage","setErrorMessage","useEffect","personList","event","target","preventDefault","phoneBookObject","findIndex","window","confirm","res","newList","setTimeout","catch","error","JSON","parse","stringify","concat","idx","console","log","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a53574bd.chunk.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Button = ({name, text, onClick}) => {\r\n  return (\r\n    <button key={name} onClick={onClick}>{text}</button>\r\n  )\r\n}\r\n\r\nButton.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  text: PropTypes.string.isRequired,\r\n  onClick: PropTypes.func.isRequired,\r\n}\r\n\r\n\r\nexport default Button","import React from 'react'\r\nimport Button from './Button'\r\nimport PropTypes from 'prop-types'\r\n\r\n\r\nconst Person = ({p, onButtonClick}) => {\r\n  const name = p.name\r\n  const number = p.number\r\n  return(\r\n    <div>{name} {number} <Button name={name} text={'delete'} onClick={onButtonClick(name)}/></div>\r\n  )\r\n}\r\n\r\nPerson.propTypes = {\r\n  p: PropTypes.object.isRequired,\r\n  onButtonClick: PropTypes.func.isRequired,\r\n  name: PropTypes.string,\r\n  number: PropTypes.string\r\n}\r\n\r\nexport default Person","import React from 'react'\r\nimport Person from './Person'\r\n\r\nconst PersonList = ({persons, filter, handleClick}) => {\r\n  let listToShow = []\r\n  if (String(filter).trim().length === 0) {\r\n    listToShow = persons\r\n  } else {\r\n    let f = ' ' + filter\r\n    listToShow = persons.filter(p =>p.name.toUpperCase().includes(f.toUpperCase().trim())) \r\n  }\r\n\r\n  return (\r\n    listToShow.map(p => <Person key={p.name} p={p} onButtonClick={handleClick}/>)\r\n  )\r\n}\r\n\r\nexport default PersonList","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst PersonForm = ({hfs, hnamei, hnumberi, nname, nnumber}) => {\r\n  return (\r\n    <form onSubmit={hfs}>\r\n      <table>\r\n        <tbody>\r\n          <tr>\r\n            <td>name:</td><td><input value={nname} onChange={hnamei}/></td>\r\n          </tr>\r\n          <tr>\r\n            <td>number:</td><td><input value={nnumber} onChange={hnumberi}/></td>\r\n          </tr>\r\n          <tr>\r\n            <td><button type='submit'>add</button></td><td></td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </form>\r\n  )\r\n}\r\n\r\nPersonForm.propTypes = {\r\n  hfs: PropTypes.func.isRequired,\r\n  hnamei: PropTypes.func.isRequired,\r\n  hnumberi: PropTypes.func.isRequired,\r\n  nname: PropTypes.string.isRequired,\r\n  nnumber: PropTypes.string.isRequired\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Filter = ({nf, flist}) => {\r\n  return (\r\n    <>\r\n      Filter shown with <input value={nf} onChange={flist}/>\r\n    </>\r\n  )\r\n}\r\n\r\nFilter.propTypes = {\r\n  nf: PropTypes.string,\r\n  flist: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Notification = ({message}) => {\r\n  const notificationStyle = {\r\n    color: 'green',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  }\r\n\r\n  if (message === '') {\r\n    return null\r\n  }\r\n  return (\r\n    <div style={notificationStyle}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nNotification.propTypes = {\r\n  message: PropTypes.string\r\n}\r\n\r\nexport default Notification\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const res = axios.get(baseUrl)\r\n  return res.then(response => response.data)\r\n}\r\n\r\nconst create = newPerson => {\r\n  const res = axios.post(baseUrl, newPerson)\r\n  return res.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newPerson) => {\r\n  const res = axios.put(`${baseUrl}/${id}`, newPerson)\r\n  return res.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = id => {\r\n  const res = axios.delete(`${baseUrl}/${id}`)\r\n  return res.then(response => response.data)\r\n}\r\n\r\nconst personService = {getAll, create, update, deletePerson}\r\n\r\nexport default personService","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst ErrorMessage = ({message}) => {\r\n  if (message === '') {\r\n    return null\r\n  }\r\n\r\n  const errorStyle = {\r\n    color: 'red',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  }\r\n\r\n  return (\r\n    <div style={errorStyle}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nErrorMessage.propTypes = {\r\n  message: PropTypes.string\r\n}\r\n\r\nexport default ErrorMessage\r\n","import React, {useState, useEffect} from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport PersonList from './components/PersonList'\r\nimport PersonForm from './components/PersonForm'\r\nimport Filter from './components/Filter'\r\nimport Notification from './components/Notification'\r\nimport personService from './services/person'\r\nimport ErrorMessage from './components/ErrorMessage'\r\n\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [newFilter, setFilter] = useState('')\r\n  const [notification, setNotification] = useState('')\r\n  const [errorMessage, setErrorMessage] = useState('')\r\n\r\n  const handleFormSubmit = (event) => {\r\n    event.preventDefault()\r\n    const phoneBookObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    }\r\n    if (persons.findIndex((p) => p.name === phoneBookObject.name) >= 0){\r\n      //alert(`${newName} is already added to phonebook`)\r\n      if (window.confirm(`${phoneBookObject.name} is already added to phonebook, replace the old number with a new one?`)) {\r\n        const id = persons[persons.findIndex(p => p.name === phoneBookObject.name)].id\r\n        personService.update(id, phoneBookObject)\r\n          .then(res => {\r\n            const newList = persons.map(p => p.id !== id ? p : res)\r\n            setPersons(newList)\r\n            setNotification(`Updated the number of ${phoneBookObject.name}`)\r\n            setTimeout(() => setNotification(''), 5000)\r\n            setNewName('')\r\n            setNewNumber('')\r\n            setFilter('')\r\n          })\r\n          .catch(error => {\r\n            setErrorMessage(JSON.parse(JSON.stringify(error.response.data))['error'])\r\n            setTimeout(() => setErrorMessage(''), 5000)\r\n            setNewName('')\r\n            setNewNumber('')\r\n  \r\n          })\r\n      } else {\r\n        setNewName('')\r\n        setNewNumber('')\r\n      }\r\n    } else {\r\n      personService.create(phoneBookObject)\r\n        .then(newPerson => {\r\n          setPersons(persons.concat(newPerson))\r\n          setNotification(`Added ${phoneBookObject.name}`)\r\n          setTimeout(() => setNotification(''), 5000)\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setFilter('')\r\n        })\r\n        .catch(error => {\r\n          setErrorMessage(JSON.parse(JSON.stringify(error.response.data))['error'])\r\n          setTimeout(() => setErrorMessage(''), 5000)\r\n          setNewName('')\r\n          setNewNumber('')\r\n        })\r\n    }\r\n  }\r\n \r\n\r\n  const handleNameInput = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberInput = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const filterList = (event) => {\r\n    setFilter(event.target.value)\r\n  } \r\n\r\n  const handleDeleteClick = (name) => {\r\n    return (\r\n      () => {\r\n        if (window.confirm(`Delete ${name}?`)) {\r\n          const idx = persons.findIndex(p => p.name === name)\r\n          if (idx >= 0) {\r\n            const id = persons[idx].id\r\n            const name = persons[idx].name\r\n            personService.deletePerson(id)\r\n              .then(res => { \r\n                setPersons(persons.filter(p => p.id !== id))\r\n                setNotification(`Deleted the entry of ${name}`)\r\n                setTimeout(() => setNotification(''), 5000)\r\n                console.log(res)\r\n              })\r\n              .catch(error => {\r\n                setErrorMessage(`Deletion of ${name} failed - maybe already removed?`)\r\n                setTimeout(() => setErrorMessage(''), 5000)\r\n                setPersons(persons.filter(p => p.name !== name))\r\n                console.log(error)\r\n              })\r\n          } \r\n        } \r\n      }\r\n    )\r\n  }\r\n\r\n  useEffect(() => {\r\n    personService.getAll()\r\n      .then(personList => {\r\n        setPersons(personList)\r\n      })\r\n  }, [])\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={notification}/>\r\n      <ErrorMessage message={errorMessage}/>\r\n      <Filter nf={newFilter} flist={filterList} />\r\n      <h3>Add a new</h3>\r\n      <PersonForm hfs={handleFormSubmit} hnamei={handleNameInput} hnumberi={handleNumberInput} nname={newName} nnumber={newNumber} />\r\n      <h3>Numbers</h3>\r\n      <PersonList persons={persons} filter={newFilter} handleClick={handleDeleteClick} />\r\n    </div>\r\n  )\r\n}\r\n\r\nApp.propTypes = {\r\n  message: PropTypes.string,\r\n  newFilter: PropTypes.string,\r\n  hfs: PropTypes.func,\r\n  hnamei: PropTypes.func,\r\n  hnumberi: PropTypes.func,\r\n  nname: PropTypes.string,\r\n  nnumber: PropTypes.string\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n)"],"sourceRoot":""}