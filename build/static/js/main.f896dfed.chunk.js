(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{37:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),i=n(14),a=n.n(i),o=n(3),u=function(e){e.name;var t=e.text,n=e.onClick;return Object(r.jsx)("button",{onClick:n,children:t})},d=function(e){var t=e.p,n=e.onButtonClick;return Object(r.jsxs)("div",{children:[t.name,"  ",t.number,"  ",Object(r.jsx)(u,{name:t.name,text:"delete",onClick:n(t.name)})]})},s=function(e){var t=e.persons,n=e.filter,c=e.handleClick,i=[];if(0===String(n).trim().length)i=t;else{var a=" "+n;i=t.filter((function(e){return e.name.toUpperCase().includes(a.toUpperCase().trim())}))}return i.map((function(e){return Object(r.jsx)(d,{p:e,onButtonClick:c},e.name)}))},l=function(e){var t=e.hfs,n=e.hnamei,c=e.hnumberi,i=e.nname,a=e.nnumber;return Object(r.jsx)("form",{onSubmit:t,children:Object(r.jsx)("table",{children:Object(r.jsxs)("tbody",{children:[Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"name:"}),Object(r.jsx)("td",{children:Object(r.jsx)("input",{value:i,onChange:n})})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"number:"}),Object(r.jsx)("td",{children:Object(r.jsx)("input",{value:a,onChange:c})})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:Object(r.jsx)("button",{type:"submit",children:"add"})}),Object(r.jsx)("td",{})]})]})})})},j=function(e){var t=e.nf,n=e.flist;return Object(r.jsxs)(r.Fragment,{children:["Filter shown with ",Object(r.jsx)("input",{value:t,onChange:n})]})},f=function(e){var t=e.message;return""===t?null:Object(r.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:t})},b=n(4),m=n.n(b),h="/api/persons",O={getAll:function(){return m.a.get(h).then((function(e){return e.data}))},create:function(e){return m.a.post(h,e).then((function(e){return e.data}))},update:function(e,t){return m.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))},deletePerson:function(e){return m.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))}},x=function(e){var t=e.message;return""===t?null:Object(r.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:t})},p=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)(""),u=Object(o.a)(a,2),d=u[0],b=u[1],m=Object(c.useState)(""),h=Object(o.a)(m,2),p=h[0],v=h[1],g=Object(c.useState)(""),y=Object(o.a)(g,2),k=y[0],C=y[1],S=Object(c.useState)(""),w=Object(o.a)(S,2),B=w[0],T=w[1],A=Object(c.useState)(""),D=Object(o.a)(A,2),I=D[0],E=D[1];return Object(c.useEffect)((function(){O.getAll().then((function(e){i(e)}))}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(f,{message:B}),Object(r.jsx)(x,{message:I}),Object(r.jsx)(j,{nf:k,flist:function(e){C(e.target.value)}}),Object(r.jsx)("h3",{children:"Add a new"}),Object(r.jsx)(l,{hfs:function(e){e.preventDefault();var t={name:d,number:p};if(""===d||""===p)return E("Both name and number are mandatory fields"),void setTimeout((function(){return E("")}),5e3);if(n.findIndex((function(e){return e.name===t.name}))>=0)if(window.confirm("".concat(t.name," is already added to phonebook, replace the old number with a new one?"))){var r=n[n.findIndex((function(e){return e.name===t.name}))].id;O.update(r,t).then((function(e){var c=n.map((function(t){return t.id!==r?t:e}));i(c),T("Updated the number of ".concat(t.name)),setTimeout((function(){return T("")}),5e3),b(""),v(""),C("")})).catch((function(e){E("Error: ".concat(t.name," may have been deleted already?")),setTimeout((function(){return E("")}),5e3),b(""),v("")}))}else b(""),v("");else O.create(t).then((function(e){i(n.concat(e)),T("Added ".concat(t.name)),setTimeout((function(){return T("")}),5e3),b(""),v(""),C("")}))},hnamei:function(e){b(e.target.value)},hnumberi:function(e){v(e.target.value)},nname:d,nnumber:p}),Object(r.jsx)("h3",{children:"Numbers"}),Object(r.jsx)(s,{persons:n,filter:k,handleClick:function(e){return function(){if(window.confirm("Delete ".concat(e,"?"))){var t=n.findIndex((function(t){return t.name===e}));if(t>=0){var r=n[t].id,c=n[t].name;O.deletePerson(r).then((function(e){i(n.filter((function(e){return e.id!==r}))),T("Deleted the entry of ".concat(c)),setTimeout((function(){return T("")}),5e3)})).catch((function(e){E("Deletion of ".concat(c," failed - maybe already removed?")),setTimeout((function(){return E("")}),5e3),i(n.filter((function(e){return e.name!==c})))}))}}}}})]})};a.a.render(Object(r.jsx)(p,{}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.f896dfed.chunk.js.map