(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{37:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),i=n(14),u=n.n(i),a=n(3),o=function(e){e.name;var t=e.text,n=e.onClick;return Object(r.jsx)("button",{onClick:n,children:t})},s=function(e){var t=e.p,n=e.onButtonClick;return Object(r.jsxs)("div",{children:[t.name,"  ",t.number,"  ",Object(r.jsx)(o,{name:t.name,text:"delete",onClick:n(t.name)})]})},d=function(e){var t=e.persons,n=e.filter,c=e.handleClick,i=[];if(0===String(n).trim().length)i=t;else{var u=" "+n;i=t.filter((function(e){return e.name.toUpperCase().includes(u.toUpperCase().trim())}))}return i.map((function(e){return Object(r.jsx)(s,{p:e,onButtonClick:c},e.name)}))},l=function(e){var t=e.hfs,n=e.hnamei,c=e.hnumberi,i=e.nname,u=e.nnumber;return Object(r.jsx)("form",{onSubmit:t,children:Object(r.jsx)("table",{children:Object(r.jsxs)("tbody",{children:[Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"name:"}),Object(r.jsx)("td",{children:Object(r.jsx)("input",{value:i,onChange:n})})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"number:"}),Object(r.jsx)("td",{children:Object(r.jsx)("input",{value:u,onChange:c})})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:Object(r.jsx)("button",{type:"submit",children:"add"})}),Object(r.jsx)("td",{})]})]})})})},f=function(e){var t=e.nf,n=e.flist;return Object(r.jsxs)(r.Fragment,{children:["Filter shown with ",Object(r.jsx)("input",{value:t,onChange:n})]})},j=function(e){var t=e.message;return""===t?null:Object(r.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:t})},b=n(4),h=n.n(b),m="/api/persons",O={getAll:function(){return h.a.get(m).then((function(e){return e.data}))},create:function(e){return h.a.post(m,e).then((function(e){return e.data}))},update:function(e,t){return h.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))},deletePerson:function(e){return h.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))}},x=function(e){var t=e.message;return""===t?null:Object(r.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:t})},p=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],i=t[1],u=Object(c.useState)(""),o=Object(a.a)(u,2),s=o[0],b=o[1],h=Object(c.useState)(""),m=Object(a.a)(h,2),p=m[0],g=m[1],v=Object(c.useState)(""),k=Object(a.a)(v,2),y=k[0],C=k[1],S=Object(c.useState)(""),w=Object(a.a)(S,2),T=w[0],B=w[1],A=Object(c.useState)(""),D=Object(a.a)(A,2),I=D[0],P=D[1],U=function(e){var t=e.substring(e.indexOf("<pre>")+5);return t=t.substring(0,t.indexOf("</pre>"))};return Object(c.useEffect)((function(){O.getAll().then((function(e){i(e)}))}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(j,{message:T}),Object(r.jsx)(x,{message:I}),Object(r.jsx)(f,{nf:y,flist:function(e){C(e.target.value)}}),Object(r.jsx)("h3",{children:"Add a new"}),Object(r.jsx)(l,{hfs:function(e){e.preventDefault();var t={name:s,number:p};if(n.findIndex((function(e){return e.name===t.name}))>=0)if(window.confirm("".concat(t.name," is already added to phonebook, replace the old number with a new one?"))){var r=n[n.findIndex((function(e){return e.name===t.name}))].id;O.update(r,t).then((function(e){var c=n.map((function(t){return t.id!==r?t:e}));i(c),B("Updated the number of ".concat(t.name)),setTimeout((function(){return B("")}),5e3),b(""),g(""),C("")})).catch((function(e){P(U(e.response.data)),setTimeout((function(){return P("")}),5e3),b(""),g("")}))}else b(""),g("");else O.create(t).then((function(e){i(n.concat(e)),B("Added ".concat(t.name)),setTimeout((function(){return B("")}),5e3),b(""),g(""),C("")})).catch((function(e){P(U(e.response.data)),setTimeout((function(){return P("")}),5e3),b(""),g("")}))},hnamei:function(e){b(e.target.value)},hnumberi:function(e){g(e.target.value)},nname:s,nnumber:p}),Object(r.jsx)("h3",{children:"Numbers"}),Object(r.jsx)(d,{persons:n,filter:y,handleClick:function(e){return function(){if(window.confirm("Delete ".concat(e,"?"))){var t=n.findIndex((function(t){return t.name===e}));if(t>=0){var r=n[t].id,c=n[t].name;O.deletePerson(r).then((function(e){i(n.filter((function(e){return e.id!==r}))),B("Deleted the entry of ".concat(c)),setTimeout((function(){return B("")}),5e3)})).catch((function(e){P("Deletion of ".concat(c," failed - maybe already removed?")),setTimeout((function(){return P("")}),5e3),i(n.filter((function(e){return e.name!==c})))}))}}}}})]})};u.a.render(Object(r.jsx)(p,{}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.04234364.chunk.js.map