(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{37:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),i=n(14),o=n.n(i),a=n(3),u=function(e){var t=e.name,n=e.text,c=e.onClick;return Object(r.jsx)("button",{onClick:c,children:n},t)},s=function(e){var t=e.p,n=e.onButtonClick,c=t.name,i=t.number;return Object(r.jsxs)("div",{children:[c," ",i," ",Object(r.jsx)(u,{name:c,text:"delete",onClick:n(c)})]})},d=function(e){var t=e.persons,n=e.filter,c=e.handleClick,i=[];if(0===String(n).trim().length)i=t;else{var o=" "+n;i=t.filter((function(e){return e.name.toUpperCase().includes(o.toUpperCase().trim())}))}return i.map((function(e){return Object(r.jsx)(s,{p:e,onButtonClick:c},e.name)}))},l=function(e){var t=e.hfs,n=e.hnamei,c=e.hnumberi,i=e.nname,o=e.nnumber;return Object(r.jsx)("form",{onSubmit:t,children:Object(r.jsx)("table",{children:Object(r.jsxs)("tbody",{children:[Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"name:"}),Object(r.jsx)("td",{children:Object(r.jsx)("input",{value:i,onChange:n})})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"number:"}),Object(r.jsx)("td",{children:Object(r.jsx)("input",{value:o,onChange:c})})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:Object(r.jsx)("button",{type:"submit",children:"add"})}),Object(r.jsx)("td",{})]})]})})})},f=function(e){var t=e.nf,n=e.flist;return Object(r.jsxs)(r.Fragment,{children:["Filter shown with ",Object(r.jsx)("input",{value:t,onChange:n})]})},j=function(e){var t=e.message;return""===t?null:Object(r.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:t})},b=n(4),h=n.n(b),m="/api/persons",O={getAll:function(){return h.a.get(m).then((function(e){return e.data}))},create:function(e){return h.a.post(m,e).then((function(e){return e.data}))},update:function(e,t){return h.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))},deletePerson:function(e){return h.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))}},x=function(e){var t=e.message;if(""===t)return null;return Object(r.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:t})},p=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],i=t[1],o=Object(c.useState)(""),u=Object(a.a)(o,2),s=u[0],b=u[1],h=Object(c.useState)(""),m=Object(a.a)(h,2),p=m[0],g=m[1],v=Object(c.useState)(""),S=Object(a.a)(v,2),y=S[0],k=S[1],C=Object(c.useState)(""),w=Object(a.a)(C,2),J=w[0],T=w[1],B=Object(c.useState)(""),N=Object(a.a)(B,2),A=N[0],D=N[1];return Object(c.useEffect)((function(){O.getAll().then((function(e){i(e)}))}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(j,{message:J}),Object(r.jsx)(x,{message:A}),Object(r.jsx)(f,{nf:y,flist:function(e){k(e.target.value)}}),Object(r.jsx)("h3",{children:"Add a new"}),Object(r.jsx)(l,{hfs:function(e){e.preventDefault();var t={name:s,number:p};if(n.findIndex((function(e){return e.name===t.name}))>=0)if(window.confirm("".concat(t.name," is already added to phonebook, replace the old number with a new one?"))){var r=n[n.findIndex((function(e){return e.name===t.name}))].id;O.update(r,t).then((function(e){var c=n.map((function(t){return t.id!==r?t:e}));i(c),T("Updated the number of ".concat(t.name)),setTimeout((function(){return T("")}),5e3),b(""),g(""),k("")})).catch((function(e){D(JSON.parse(JSON.stringify(e.response.data)).error),setTimeout((function(){return D("")}),5e3),b(""),g("")}))}else b(""),g("");else O.create(t).then((function(e){i(n.concat(e)),T("Added ".concat(t.name)),setTimeout((function(){return T("")}),5e3),b(""),g(""),k("")})).catch((function(e){D(JSON.parse(JSON.stringify(e.response.data)).error),setTimeout((function(){return D("")}),5e3),b(""),g("")}))},hnamei:function(e){b(e.target.value)},hnumberi:function(e){g(e.target.value)},nname:s,nnumber:p}),Object(r.jsx)("h3",{children:"Numbers"}),Object(r.jsx)(d,{persons:n,filter:y,handleClick:function(e){return function(){if(window.confirm("Delete ".concat(e,"?"))){var t=n.findIndex((function(t){return t.name===e}));if(t>=0){var r=n[t].id,c=n[t].name;O.deletePerson(r).then((function(e){i(n.filter((function(e){return e.id!==r}))),T("Deleted the entry of ".concat(c)),setTimeout((function(){return T("")}),5e3),console.log(e)})).catch((function(e){D("Deletion of ".concat(c," failed - maybe already removed?")),setTimeout((function(){return D("")}),5e3),i(n.filter((function(e){return e.name!==c}))),console.log(e)}))}}}}})]})};o.a.render(Object(r.jsx)(p,{}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.a53574bd.chunk.js.map